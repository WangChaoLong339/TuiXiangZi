{"version":3,"sources":["../../../../../assets/resources/scripts/assets/resources/scripts/WindowInit.js"],"names":["cc","Class","extends","Component","properties","onLoad","Node","prototype","PathChild","path","componentName","names","split","nd","i","length","getChildByName","getComponent","window","EnterGameTime","Date","getTime","ViewSize","winSize","GetCountFramArray","arr","elmt","count","SetLocalStorage","key","data","sys","localStorage","setItem","JSON","stringify","GetLocalStorage","getItem","parse","SetSpriteFrame","sprite","spriteFrame","loader","loadRes","SpriteFrame","err","error"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAMLC,YAAQ,kBAAY;AAChBL,WAAGM,IAAH,CAAQC,SAAR,CAAkBC,SAAlB,GAA8B,UAAUC,IAAV,EAAgBC,aAAhB,EAA+B;AACzD,gBAAIC,QAAQF,KAAKG,KAAL,CAAW,GAAX,CAAZ;AACA,gBAAIC,KAAK,IAAT;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,MAAMI,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC,oBAAID,EAAJ,EAAQ;AACJA,yBAAKA,GAAGG,cAAH,CAAkBL,MAAMG,CAAN,CAAlB,CAAL;AACH,iBAFD,MAEO;AACHD,yBAAK,KAAKG,cAAL,CAAoBL,MAAMG,CAAN,CAApB,CAAL;AACH;AACJ;AACD,gBAAIJ,aAAJ,EAAmB;AACf,uBAAOG,GAAGI,YAAH,CAAgBP,aAAhB,CAAP;AACH,aAFD,MAEO;AACH,uBAAOG,EAAP;AACH;AACJ,SAfD;;AAiBA;AACAK,eAAOC,aAAP,GAAuB,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,IAA9C;;AAEA;AACAH,eAAOI,QAAP,GAAkBtB,GAAGuB,OAArB;;AAEAL,eAAOM,iBAAP,GAA2B,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAC5C,gBAAIC,QAAQ,CAAZ;AACA,iBAAK,IAAIb,IAAI,CAAb,EAAgBA,IAAIW,IAAIV,MAAxB,EAAgCD,GAAhC,EAAqC;AACjC,oBAAIW,IAAIX,CAAJ,KAAUY,IAAd,EAAoB;AAChBC;AACH;AACJ;AACD,mBAAOA,KAAP;AACH,SARD;;AAUAT,eAAOU,eAAP,GAAyB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAC1C9B,eAAG+B,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BJ,GAA5B,EAAiCK,KAAKC,SAAL,CAAeL,IAAf,CAAjC;AACH,SAFD;;AAIAZ,eAAOkB,eAAP,GAAyB,UAAUP,GAAV,EAAe;AACpC,gBAAIC,OAAO9B,GAAG+B,GAAH,CAAOC,YAAP,CAAoBK,OAApB,CAA4BR,GAA5B,CAAX;AACA,gBAAIC,IAAJ,EAAU;AACN,uBAAOI,KAAKI,KAAL,CAAWR,IAAX,CAAP;AACH;AACD,mBAAO,IAAP;AACH,SAND;;AAQAZ,eAAOqB,cAAP,GAAwB,UAAU9B,IAAV,EAAgB+B,MAAhB,EAAwB;AAC5C,gBAAI,CAAC/B,IAAL,EAAW;AACP+B,uBAAOC,WAAP,GAAqB,IAArB;AACA;AACH;AACDzC,eAAG0C,MAAH,CAAUC,OAAV,CAAkBlC,IAAlB,EAAwBT,GAAG4C,WAA3B,EAAwC,UAAUC,GAAV,EAAeJ,WAAf,EAA4B;AAChE,oBAAII,GAAJ,EAAS;AACL7C,uBAAG8C,KAAH,CAASD,GAAT;AACA;AACH;AACDL,uBAAOC,WAAP,GAAqBA,WAArB;AACH,aAND;AAOH,SAZD;AAaH;AAjEI,CAAT","file":"WindowInit.js","sourceRoot":"../../../../../assets/resources/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    onLoad: function () {\n        cc.Node.prototype.PathChild = function (path, componentName) {\n            let names = path.split('/')\n            let nd = null\n            for (let i = 0; i < names.length; i++) {\n                if (nd) {\n                    nd = nd.getChildByName(names[i])\n                } else {\n                    nd = this.getChildByName(names[i])\n                }\n            }\n            if (componentName) {\n                return nd.getComponent(componentName)\n            } else {\n                return nd\n            }\n        }\n\n        // 记录一个进入游戏的时间\n        window.EnterGameTime = new Date().getTime() / 1000\n\n        // 记录屏幕Size\n        window.ViewSize = cc.winSize\n\n        window.GetCountFramArray = function (arr, elmt) {\n            let count = 0\n            for (let i = 0; i < arr.length; i++) {\n                if (arr[i] == elmt) {\n                    count++\n                }\n            }\n            return count\n        }\n\n        window.SetLocalStorage = function (key, data) {\n            cc.sys.localStorage.setItem(key, JSON.stringify(data))\n        }\n\n        window.GetLocalStorage = function (key) {\n            let data = cc.sys.localStorage.getItem(key)\n            if (data) {\n                return JSON.parse(data)\n            }\n            return null\n        }\n\n        window.SetSpriteFrame = function (path, sprite) {\n            if (!path) {\n                sprite.spriteFrame = null\n                return\n            }\n            cc.loader.loadRes(path, cc.SpriteFrame, function (err, spriteFrame) {\n                if (err) {\n                    cc.error(err)\n                    return\n                }\n                sprite.spriteFrame = spriteFrame\n            })\n        }\n    },\n});\n"]}