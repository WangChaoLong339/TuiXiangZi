{"version":3,"sources":["../../../../../../assets/resources/scripts/Ui/assets/resources/scripts/Ui/CheckMap.js"],"names":["cc","Class","extends","Component","properties","onLoad","scrollView","node","PathChild","ScrollView","maxWidth","width","content","item","active","smallItem","onenter","allData","GetLocalStorage","createItem","removeAllChildren","i","length","data","instantiate","Label","string","idx","height","smallItemSize","lineCount","columnCount","parseInt","j","map","SetSpriteFrame","getPathByType","Sprite","parent","Layout","updateLayout","y","type","error","btnDelete","event","target","children","removeChild","splice","SetLocalStorage","btnClose","UiMgr","close","name"],"mappings":"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","file":"CheckMap.js","sourceRoot":"../../../../../../assets/resources/scripts/Ui","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    onLoad: function () {\n        this.scrollView = this.node.PathChild('scrollView', cc.ScrollView)\n        this.maxWidth = this.scrollView.node.width\n        this.content = this.scrollView.content\n        this.item = this.scrollView.node.PathChild('item')\n        this.item.active = false\n        this.smallItem = this.item.PathChild('layout/smallItem')\n        this.smallItem.active = false\n    },\n\n    onenter: function () {\n        this.allData = GetLocalStorage('TuiXiangZi-info') || []\n        this.createItem()\n    },\n\n    createItem: function () {\n        this.content.removeAllChildren()\n        for (let i = 0; i < this.allData.length; i++) {\n            let data = this.allData[i]\n            let item = cc.instantiate(this.item)\n            item.PathChild('title', cc.Label).string = `第${data.idx + 1}关`\n            item.width = this.maxWidth\n            item.height = this.maxWidth + 50\n            item.idx = i\n            // 计算小地图item size\n            let smallItemSize = 0\n            if (data.lineCount >= data.columnCount) {\n                smallItemSize = parseInt(item.width / data.lineCount)\n            } else if (data.lineCount < data.columnCount) {\n                smallItemSize = parseInt(item.width / data.columnCount)\n            }\n            // 渲染小地图\n            for (let j = 0; j < data.map.length; j++) {\n                let smallItem = cc.instantiate(this.smallItem)\n                SetSpriteFrame(this.getPathByType(data.map[j]), smallItem.PathChild('val', cc.Sprite))\n                smallItem.width = smallItemSize\n                smallItem.height = smallItemSize\n                smallItem.active = true\n                smallItem.parent = item.PathChild('layout')\n                item.PathChild('layout').width = smallItemSize * data.lineCount\n                item.PathChild('layout', cc.Layout).updateLayout()\n            }\n            item.active = true\n            item.parent = this.content\n        }\n        this.content.y = 0\n    },\n\n    getPathByType: function (type) {\n        switch (type) {\n            case 0:\n                return 'picture/pure/color_dark'\n            case 1:\n                return 'picture/wall/wall_00'\n            case 2:\n                return 'picture/box/box_00'\n            case 3:\n                return 'picture/dot/dot_1'\n            case 4:\n                return 'picture/box/box_01'\n            case 5:\n                return 'picture/hero/down_00'\n            default:\n                cc.error('!--无法匹配的类型--!')\n        }\n    },\n\n    btnDelete: function (event) {\n        let idx = event.target.parent.idx\n        for (let i = 0; i < this.content.children.length; i++) {\n            let node = this.content.children[i]\n            if (idx == node.idx) {\n                this.content.removeChild(node)\n                break\n            }\n        }\n        this.allData.splice(idx, 1)\n        for (let i = idx; i < this.allData.length; i++) {\n            this.allData[i].idx -= 1\n        }\n        SetLocalStorage('TuiXiangZi-info', this.allData)\n    },\n\n    btnClose: function () {\n        UiMgr.close(this.node.name)\n    },\n});\n"]}