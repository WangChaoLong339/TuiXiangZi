{"version":3,"sources":["UiMgr.js"],"names":["cc","Class","extends","Component","properties","uiRoot","Node","tipsRoot","onLoad","model","prefabs","window","UiMgr","open","name","args","Array","prototype","slice","call","arguments","active","getComponent","onenter","openAction","loader","loadRes","err","prefab","error","pb","instantiate","parent","close","closeAction","showTips","msg","tips","hideTips","node","scaleX","scaleY","stopAllActions","runAction","scaleTo","easing","easeCubicActionOut","sequence","callFunc"],"mappings":"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","file":"UiMgr.js","sourceRoot":"../../../../../assets/resources/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        uiRoot: cc.Node,\n        tipsRoot: cc.Node,\n    },\n\n    onLoad: function () {\n        this.model = {\n            prefabs: [],\n        }\n\n        window.UiMgr = this\n    },\n\n    open: function (name) {\n        let args = Array.prototype.slice.call(arguments).slice(1)\n        if (this.model.prefabs[name]) {\n            this.model.prefabs[name].active = true\n            this.model.prefabs[name].getComponent(name).onenter && this.model.prefabs[name].getComponent(name).onenter(args)\n            this.openAction(this.model.prefabs[name])\n            return\n        }\n        cc.loader.loadRes(`ui/${name}`, (err, prefab) => {\n            if (err) {\n                cc.error(err)\n                return\n            }\n            let pb = cc.instantiate(prefab)\n            pb.active = false\n            pb.parent = this.uiRoot\n            this.model.prefabs[name] = pb\n            this.openAction(pb)\n            pb.getComponent(name).onenter && pb.getComponent(name).onenter(args)\n        })\n    },\n\n    close: function (name) {\n        if (this.model.prefabs[name]) {\n            this.closeAction(this.model.prefabs[name])\n        }\n    },\n\n    showTips: function (msg) {\n        if (this.model.prefabs.tips) {\n            this.model.prefabs.tips.active = true\n            this.model.prefabs.tips.getComponent('Tips').onenter && this.model.prefabs.tips.getComponent('Tips').onenter(msg)\n            this.openAction(this.model.prefabs.tips)\n            return\n        }\n        cc.loader.loadRes(`tips/Tips`, (err, prefab) => {\n            if (err) {\n                cc.error(err)\n                return\n            }\n            let pb = cc.instantiate(prefab)\n            pb.active = false\n            pb.parent = this.tipsRoot\n            this.model.prefabs.tips = pb\n            this.openAction(pb)\n            pb.getComponent('Tips').onenter && pb.getComponent('Tips').onenter(msg)\n        })\n    },\n\n    hideTips: function () {\n        if (this.model.prefabs.tips) {\n            this.closeAction(this.model.prefabs.tips)\n        }\n    },\n\n    openAction: function (node) {\n        node.scaleX = 0\n        node.scaleY = 0\n        node.active = true\n        node.stopAllActions()\n        node.runAction(cc.scaleTo(0.3, 1, 1).easing(cc.easeCubicActionOut()))\n    },\n\n    closeAction: function (node) {\n        node.stopAllActions()\n        node.runAction(cc.sequence(\n            cc.scaleTo(0.3, 0, 0).easing(cc.easeCubicActionOut()),\n            cc.callFunc(() => {\n                node.active = false\n                node.scaleX = 1\n                node.scaleY = 1\n            }),\n        ))\n    },\n});\n"]}